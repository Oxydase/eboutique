{# templates/category/index.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Catégories{% endblock %}

{% block body %}
    <h1>Liste des Catégories</h1>

    {% for category in categories %}
        <div style="margin-bottom: 2rem;">
            <h2>{{ category.name }}</h2>
            <p>{{ category.description }}</p>

            {% if category.products|length > 0 %}
                <ul>
                    {% for product in category.products|slice(0, 3) %}
                        <li>
                            <strong>{{ product.name }}</strong> – {{ product.priceHT }} €
                            <br>
                            <em>{{ product.description }}</em>
                            <br>
                            {% if product.mainImage %}
                                <img src="{{ asset(product.mainImage.path) }}" alt="{{ product.name }}" width="150">
                            {% else %}
                                <p>Pas d'image</p>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
                <a href="{{ path('category_show', { id: category.id }) }}">Voir tous les produits</a>
            {% else %}
                <p><em>Aucun produit dans cette catégorie.</em></p>
            {% endif %}
        </div>
    {% endfor %}
{% endblock %}
